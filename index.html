<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="An OBJ 3D Model Viewer">
    <meta name="author" content="Andrey Kaipov">

    <title>OBJ Viewer</title>

    <!-- jQuery UI CSS. -->
    <!-- <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.10.4/themes/pepper-grinder/jquery-ui.css"> -->

    <link rel="stylesheet" href="https://rawgit.com/codemirror/CodeMirror/master/lib/codemirror.css">

    <!-- Custom styles for this page. -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/codemirror.css">
</head>

<body>
    <div class="sidebar">
        <input type="file" id="i_file">
        <ul>
            <a download="" id="download_link">Download triangulated .obj file</a>
            <hr id="download_hreaker">

            <li id="selected_obj"></li>
            <hr id="selected_hreaker">

            <li id="vertices"></li>
            <li id="edges"></li>
            <li id="faces"></li>
            <li id="genus"></li>
        </ul>
    </div>

    <div id="graphicsContainer" tabindex="1"></div>

    <!-- CODEMIRROR AREA -->
    <div id="codeMirror">
        <div id="dragbar"><h1>(Drag) Fragment Shader Source</h1></div>
        <textarea id="vertSource" class="CodeMirror">
<!-- REMOVE THESE HTML COMMENT LINES BEFORE LOADING AN OBJECT OR IT WILL PRODUCE AN ERROR.  IN FUTURE WE WILL FIX THIS ISSUE, BUT FOR NOW JUST DELETE THEM BEFORE LOADING!!!!!!!!!!!!

uniform vec2 uvScale;
varying vec2 vUv;

void main()
{

	vUv = uvScale * uv;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;

}

-->
        </textarea>
        <textarea id="fragSource" class="CodeMirror">
<!--

uniform float time;
uniform vec2 resolution;

uniform float fogDensity;
uniform vec3 fogColor;

uniform sampler2D texture1;
uniform sampler2D texture2;

varying vec2 vUv;

void main( void ) {

	vec2 position = -1.0 + 2.0 * vUv;

	vec4 noise = texture2D( texture1, vUv );
	vec2 T1 = vUv + vec2( 1.5, -1.5 ) * time  *0.02;
	vec2 T2 = vUv + vec2( -0.5, 2.0 ) * time * 0.01;

	T1.x += noise.x * 2.0;
	T1.y += noise.y * 2.0;
	T2.x -= noise.y * 0.2;
	T2.y += noise.z * 0.2;

	float p = texture2D( texture1, T1 * 2.0 ).a;

	vec4 color = texture2D( texture2, T2 * 2.0 );
	vec4 temp = color * ( vec4( p, p, p, p ) * 2.0 ) + ( color * color - 0.1 );

	if( temp.r > 1.0 ){ temp.bg += clamp( temp.r - 2.0, 0.0, 100.0 ); }
	if( temp.g > 1.0 ){ temp.rb += temp.g - 1.0; }
	if( temp.b > 1.0 ){ temp.rg += temp.b - 1.0; }

	gl_FragColor = temp;

	float depth = gl_FragCoord.z / gl_FragCoord.w;
	const float LOG2 = 1.442695;
	float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );
	fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );

	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}

-->
        </textarea>
    </div>

    <!-- jQuery. It's used a couple times... -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

    <!-- Core Three.js library plus extras. -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r74/three.js"></script>
    <script src="http://ocelot.aul.fiu.edu/~akaip002/js-libraries/OBJLoader.js"></script>     <!-- For actually loading .obj files -->
    <script src="http://ocelot.aul.fiu.edu/~akaip002/js-libraries/TransformControls.js"></script> <!-- For mouse object controls. -->
    <script src="http://ocelot.aul.fiu.edu/~akaip002/js-libraries/OrbitControls.js"></script> <!-- For mouse camera controls. -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5.1/dat.gui.js"></script>   <!-- For fancy GUI sliders. -->
    <script src="http://ocelot.aul.fiu.edu/~akaip002/js-libraries/Projector.js"></script>  <!-- For raycaster to select objects. -->

    <!-- CodeMirror -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/codemirror.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/mode/javascript/javascript.js"></script>

    <script src="js/dragResize.js"></script>           <!-- Draggable Div Resize -->
    <script src="js/triangulate.js"></script>   <!-- Triangulate script -->
    <script src="js/xyzAxes.js"></script>       <!-- Displays debug axes -->
    <script src="js/obj_viewer.js"></script>    <!-- Displays the model -->
    <script src="js/obj_viewer_keycontrols.js"></script> <!-- keyboard events for obj viewer -->
    <script src="js/gui.js"></script>           <!-- Make the GUI functional -->

    <!-- The following css makes the gui text larger. Has to be after the dat.gui js file. -->
    <style>
        .dg {
            color: #fff;
            font-size: 14px;
            text-shadow: none !important;
        }

        .dg li:not(.folder) {
            /*background: rgba(0, 0, 0, 1); !! transparency of gui makes the folders buggy when closed. */
            border-bottom: 1px solid #ddd;
        }
    </style>

    <!-- Google analytics. -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-70865218-2', 'auto');
    ga('send', 'pageview');
    </script>

</body>
</html>
